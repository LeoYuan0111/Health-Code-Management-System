<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.healthcodebe.mapper.ColorChangeMapper">

    <resultMap id="BaseColorChangeMap" type="com.example.healthcodebe.entity.ColorChange">
        <result column="id_number" property="idNumber" jdbcType="VARCHAR" />
        <result column="color" property="color" jdbcType="VARCHAR" />
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />
        <result column="qr_code" property="qrCode" jdbcType="VARCHAR" />
    </resultMap>

    <select id="getColorChangeById" resultMap="BaseColorChangeMap" parameterType="String">
        SELECT
        *
        FROM
        color_change
        <where>
            id_number = #{id}
        </where>
        ORDER BY time DESC
    </select>

    <insert id="addColorChange" parameterType="com.example.healthcodebe.entity.ColorChange">
        INSERT INTO color_change
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="idNumber != null and idNumber != ''">id_number,</if>
            <if test="tocolor != null">tocolor,</if>
            <if test="time != null">time,</if>
            <if test="reason != null">reason,</if>
        </trim>
        <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
            <if test="idNumber != null and idNumber != ''">#{idNumber},</if>
            <if test="tocolor != null">#{tocolor},</if>
            <if test="time != null">#{time},</if>
            <if test="reason != null">#{reason},</if>
        </trim>
    </insert>
</mapper>